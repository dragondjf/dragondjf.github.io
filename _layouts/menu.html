<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <style type="text/css">
    <title>web 学习</title> 
    <style type="text/css"> html {
        margin:0;
        padding:0;
        border:0;
    }
    body {
        font-size:12px;
        color: white;
        background-color: #0D2E4C;
    }
    div#menu {
        color: white;
        padding-left: 10%;
        padding-right: 10%;
        clear: both;
    }
    div#content {
        padding: 20px;
        clear: both;
    }
    div#center {
        width: 70%;
        float: left;
        padding-left: 10%;
        background-color: transparent;
    }
    div#rightbar {
        width: 20%;
        float: left;
        background-color: #556c81;
        z-index: 0
    }
    #rightnav {
        width: 80%;
        height: 80%;
        line-height: 40px;
        list-style-type: none;
        color: white;
        padding: 10% auto;
        position: fixed;
    }
    #rightnav li a {
        display: block;
        text-align:left;
        color: white;
        background:#556c81;
        padding-left: 24px;
    }
    #rightnav li a:link {
        text-decoration:none;
    }
    #rightnav li a:visited {
        text-decoration:none;
    }
    #rightnav li a:hover {
        text-decoration:none;
        font-weight:bold;
    }
    #rightnav li {
        width: 20%;
        clear: both;
        border-bottom: 1px solid #0D2E4C;
    }
    #rightnav li a:hover {
        color: #FFC76D;
        background:#344f68;
    }
    #rightnav li ul {
        line-height: 36px;
        list-style-type: none;
        text-align:left;
        padding: 0;
        width: 100%;
    }
    #rightnav li ul li {
        width: 100%;
        padding: 0;
        border-bottom: none;
    }
    #rightnav li ul a {
        color: white;
        display: block;
        width: 80%;
        text-align:left;
        padding-left:20%;
        background: #556c81;
    }
    #rightnav li ul a:link {
        color: white;
        text-decoration:none;
    }
    #rightnav li ul a:visited {
        color: white;
        text-decoration:none;
        /*background-color: #0D2E4C;*/
    }
    #rightnav li ul a:hover {
        color: #FFC76D;
        text-decoration:none;
        font-weight:normal;
        background:#344f68;
    }
    </style>
    <link href="../css/layout.css" rel="stylesheet">
    <link href="../css/hmenu.css" rel="stylesheet">
    <script type="text/javascript" src="../js/jquery-1.11.0.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $("#hmenu>li>ul>li").css('width', $("#hmenu>li").width().toString());
        $("#rightnav>li>a").click(function(event) {
            $("#rightnav>li>a").css('background-color', '#556c81');
            $("#rightnav>li>ul>li>a").css('background-color', '#556c81');

            $(this).parent().children('ul>li>a').css('background-color', '#344f68');
            $(this).css('background-color', '#0D2E4C');
            $("#rightnav>li>ul").hide();
            $(this).parent().children('ul').toggle('slow');
            // event.preventDefault();
        });
        $("#rightnav>li>a").on('mouseleave', '', function(event) {
            $(this).css('background-color', '#556c81');
            // event.preventDefault();
        });
        $("#rightnav>li>a").on('mouseenter', '', function(event) {
            $(this).css('background-color', '#344f68');
            // event.preventDefault();
        });

        $("#rightnav>li>ul>li>a").click(function(event) {
            $("#rightnav>li>ul>li>a").css('background-color', '#556c81');
            $(this).parent().parent().children('li>a').css('background-color', '#344f68');
            $(this).parent().parent().parent().children('a').css('background-color', '#344f68');
            $(this).css('background-color', '#0D2E4C');
            // event.preventDefault();
        });
        $("#rightnav>li>ul>li>a").on('mouseleave', '', function(event) {
            $(this).css('background-color', '#556c81');
            // event.preventDefault();
        });
        $("#rightnav>li>ul>li>a").on('mouseenter', '', function(event) {
            $(this).css('background-color', '#344f68');
            // event.preventDefault();
        });

        $("#rightnav>li>ul").hide();
        $($("#rightnav>li>ul")[0]).show()

    });
    </script>
</head>

<body>
    <div id='menu'>
        <ul id="hmenu">
            <li class=""><a href="#">产品介绍</a> 
                <ul>
                    <li><a href="#">产品一</a>
                    </li>
                    <li><a href="#">产品一</a>
                    </li>
                    <li><a href="#">产品一</a>
                    </li>
                    <li><a href="#">产品一</a>
                    </li>
                    <li><a href="#">产品一</a>
                    </li>
                    <li><a href="#">产品一</a>
                    </li>
                </ul>
            </li>
            <li class=""><a href="#">服务介绍</a> 
                <ul>
                    <li class=""><a href="#">服务二</a>
                    </li>
                    <li class=""><a href="#">服务二</a>
                    </li>
                    <li class=""><a href="#">服务二</a>
                    </li>
                    <li class=""><a href="#">服务二服务二</a>
                    </li>
                    <li><a href="#">服务二服务二服务二</a>
                    </li>
                    <li class=""><a href="#">服务二</a>
                    </li>
                </ul>
            </li>
            <li class=""><a href="#">成功案例</a> 
                <ul>
                    <li><a href="#">案例三</a>
                    </li>
                    <li><a href="#">案例</a>
                    </li>
                    <li><a href="#">案例三案例三</a>
                    </li>
                    <li><a href="#">案例三案例三案例三</a>
                    </li>
                </ul>
            </li>
            <li class=""><a href="#">关于我们</a> 
                <ul>
                    <li><a href="#">我们四</a>
                    </li>
                    <li><a href="#">我们四</a>
                    </li>
                    <li><a href="#">我们四</a>
                    </li>
                    <li><a href="#">我们四111</a>
                    </li>
                </ul>
            </li>
            <li class=""><a href="#">在线演示</a> 
                <ul>
                    <li class=""><a href="#">演示</a>
                    </li>
                    <li class=""><a href="#">演示</a>
                    </li>
                    <li class=""><a href="#">演示</a>
                    </li>
                    <li class=""><a href="#">演示演示演示</a>
                    </li>
                    <li class=""><a href="#">演示演示演示</a>
                    </li>
                    <li class=""><a href="#">演示演示</a>
                    </li>
                    <li><a href="#">演示演示演示</a>
                    </li>
                    <li><a href="#">演示演示演示演示演示</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div id="content">
        <div id="center">
            <div class="grid fluid show-grid">
                        <div class="row">
                            <div class="span1">1</div>
                            <div class="span1">2</div>
                            <div class="span1">3</div>
                            <div class="span1">4</div>
                            <div class="span1">5</div>
                            <div class="span1">6</div>
                            <div class="span1">7</div>
                            <div class="span1">8</div>
                            <div class="span1">9</div>
                            <div class="span1">10</div>
                            <div class="span1">11</div>
                            <div class="span1">12</div>
                        </div>

                        <div class="row">
                            <div class="span2">1</div>
                            <div class="span2">2</div>
                            <div class="span2">3</div>
                            <div class="span2">4</div>
                            <div class="span2">5</div>
                            <div class="span2">6</div>
                        </div>

                        <div class="row">
                            <div class="span2 offset2">2</div>
                            <div class="span2">3</div>
                            <div class="span2">4</div>
                            <div class="span2">5</div>
                            <div class="span2">6</div>
                        </div>

                    </div>
            <section id="object">
                <!-- Introduction-->
                <header id="object.intro">
                    <h1>对象</h1>
                </header>
                <!-- Articles-->
                <article id="object.general">
                    <h2>对象使用和属性</h2>
                    <div>
                        <p>JavaScript 中所有变量都是对象，除了两个例外
                            <a href="#core.undefined">
                                <code>null</code>
                            </a>和
                            <a href="#core.undefined">
                                <code>undefined</code>
                            </a>。</p>
                        <pre>
                            <code>
                                <span class="kwd">false</span>
                                <span class="pun">.</span>
                                <span class="pln">toString</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 'false'</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">[</span>
                                <span class="lit">1</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">3</span>
                                <span class="pun">].</span>
                                <span class="pln">toString</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// '1,2,3'</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">(){}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">bar</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 1</span>
                            </code>
                        </pre>
                        <p>一个常见的误解是数字的字面值（literal）不是对象。这是因为 JavaScript 解析器的一个错误， 它试图将
                            <em>点操作符</em>解析为浮点数字面值的一部分。</p>
                        <pre>
                            <code>
                                <span class="lit">2.toString</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 出错：SyntaxError</span>
                            </code>
                        </pre>
                        <p>有很多变通方法可以让数字的字面值看起来像对象。</p>
                        <pre>
                            <code>
                                <span class="lit">2.</span>
                                <span class="pun">.</span>
                                <span class="pln">toString</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 第二个点号可以正常解析</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="lit">2</span>
                                <span class="pln"></span>
                                <span class="pun">.</span>
                                <span class="pln">toString</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 注意点号前面的空格</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">(</span>
                                <span class="lit">2</span>
                                <span class="pun">).</span>
                                <span class="pln">toString</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 2先被计算</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>对象作为数据类型</h3>
                        <p>JavaScript 的对象可以作为
                            <a href="http://en.wikipedia.org/wiki/Hashmap">
                                <em>哈希表</em>
                            </a>使用，主要用来保存命名的键与值的对应关系。</p>
                        <p>使用对象的字面语法 -
                            <code>{}</code>- 可以创建一个简单对象。这个新创建的对象从
                            <code>Object.prototype</code>
                            <a href="#object.prototype">继承</a>下面，没有任何<a href="#object.hasownproperty">自定义属性</a>。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln"></span>
                                <span class="com">// 一个空对象</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 一个新对象，拥有一个值为12的自定义属性'test'</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">test</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="lit">12</span>
                                <span class="pun">};</span>
                                <span class="pln"></span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>访问属性</h3>
                        <p>有两种方式来访问对象的属性，点操作符或者中括号操作符。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">name</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="str">'kitten'</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">name</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// kitten</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">[</span>
                                <span class="str">'name'</span>
                                <span class="pun">];</span>
                                <span class="pln"></span>
                                <span class="com">// kitten</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln"></span>
                                <span class="kwd">get</span>
                                <span class="pln"></span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'name'</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">[</span>
                                <span class="kwd">get</span>
                                <span class="pun">];</span>
                                <span class="pln"></span>
                                <span class="com">// kitten</span>
                                <span class="pln">
                                    <br>
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="lit">1234</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// SyntaxError</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">[</span>
                                <span class="str">'1234'</span>
                                <span class="pun">];</span>
                                <span class="pln"></span>
                                <span class="com">// works</span>
                            </code>
                        </pre>
                        <p>两种语法是等价的，但是中括号操作符在下面两种情况下依然有效 - 动态设置属性 - 属性名不是一个有效的变量名（
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>比如属性名中包含空格，或者属性名是 JS 的关键词）</p>
                        <aside>
                            <p>
                                <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>在 <a href="http://www.jslint.com/">JSLint</a> 语法检测工具中，点操作符是推荐做法。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>删除属性</h3>
                        <p>删除属性的唯一方法是使用
                            <code>delete</code>操作符；设置属性为
                            <code>undefined</code>或者
                            <code>null</code>并不能真正的删除属性， 而
                            <strong>仅仅</strong>是移除了属性和值的关联。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">obj</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; bar</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">,</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; foo</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">,</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; baz</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="lit">3</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>obj</span>
                                <span class="pun">.</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">undefined</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>obj</span>
                                <span class="pun">.</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">null</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">delete</span>
                                <span class="pln">obj</span>
                                <span class="pun">.</span>
                                <span class="pln">baz</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="kwd">in</span>
                                <span class="pln">obj</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">if</span>
                                <span class="pln"></span>
                                <span class="pun">(</span>
                                <span class="pln">obj</span>
                                <span class="pun">.</span>
                                <span class="pln">hasOwnProperty</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">))</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="str">''</span>
                                <span class="pln"></span>
                                <span class="pun">+</span>
                                <span class="pln">obj</span>
                                <span class="pun">[</span>
                                <span class="pln">i</span>
                                <span class="pun">]);</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>上面的输出结果有
                            <code>bar undefined</code>和
                            <code>foo null</code>- 只有
                            <code>baz</code>被真正的删除了，所以从输出结果中消失。</p>
                    </div>
                    <div>
                        <h3>属性名的语法</h3>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">test</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="str">'case'</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="str">'I am a keyword so I must be notated as a string'</span>
                                <span class="pun">,</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">delete</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="str">'I am a keyword too so me'</span>
                                <span class="pln"></span>
                                <span class="com">// 出错：SyntaxError</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                            </code>
                        </pre>
                        <p>对象的属性名可以使用字符串或者普通字符声明。但是由于 JavaScript 解析器的另一个错误设计， 上面的第二种声明方式在 ECMAScript 5 之前会抛出
                            <code>SyntaxError</code>的错误。</p>
                        <p>这个错误的原因是
                            <code>delete</code>是 JavaScript 语言的一个
                            <em>关键词</em>；因此为了在更低版本的 JavaScript 引擎下也能正常运行， 必须使用
                            <em>字符串字面值</em>声明方式。</p>
                    </div>
                </article>
                <article id="object.prototype">
                    <h2>原型</h2>
                    <div>
                        <p>JavaScript 不包含传统的类继承模型，而是使用
                            <em>prototypal</em>原型模型。</p>
                        <p>虽然这经常被当作是 JavaScript 的缺点被提及，其实基于原型的继承模型比传统的类继承还要强大。 实现传统的类继承模型是很简单，但是实现 JavaScript 中的原型继承则要困难的多。 (It is for example fairly trivial to build a classic model on top of it, while the other way around is a far more difficult task.)</p>
                        <p>由于 JavaScript 是唯一一个被广泛使用的基于原型继承的语言，所以理解两种继承模式的差异是需要一定时间的。</p>
                        <p>第一个不同之处在于 JavaScript 使用
                            <em>原型链</em>的继承方式。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>简单的使用
                                <code>Bar.prototype = Foo.prototype</code>将会导致两个对象共享
                                <strong>相同</strong>的原型。 因此，改变任意一个对象的原型都会影响到另一个对象的原型，在大多数情况下这不是希望的结果。
                            </p>
                        </aside>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">this</span>
                                <span class="pun">.</span>
                                <span class="pln">value</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">42</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; method</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 设置Bar的prototype属性为Foo的实例对象</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Bar</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Bar</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'Hello World'</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 修正Bar.prototype.constructor为Bar本身</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Bar</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">constructor</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">test</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="com">// 创建Bar的一个新实例</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 原型链</span>
                                <span class="pln">
                                    <br>test</span>
                                <span class="pun">[</span>
                                <span class="typ">Bar</span>
                                <span class="pun">的实例]</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="typ">Bar</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">[</span>
                                <span class="typ">Foo</span>
                                <span class="pun">的实例]</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">{</span>
                                <span class="pln">foo</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="str">'Hello World'</span>
                                <span class="pln"></span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">{</span>
                                <span class="pln">method</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="pun">...};</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="typ">Object</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">{</span>
                                <span class="pln">toString</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="pun">...</span>
                                <span class="pln"></span>
                                <span class="com">/* etc. */</span>
                                <span class="pun">};</span>
                            </code>
                        </pre>
                        <p>上面的例子中，
                            <code>test</code>对象从
                            <code>Bar.prototype</code>和
                            <code>Foo.prototype</code>继承下来；因此， 它能访问
                            <code>Foo</code>的原型方法
                            <code>method</code>。同时，它也能够访问
                            <strong>那个</strong>定义在原型上的
                            <code>Foo</code>实例属性
                            <code>value</code>。 需要注意的是
                            <code>new Bar()</code>
                            <strong>不会</strong>创造出一个新的
                            <code>Foo</code>实例，而是 重复使用它原型上的那个实例；因此，所有的
                            <code>Bar</code>实例都会共享
                            <strong>相同</strong>的
                            <code>value</code>属性。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>
                                <strong>不要</strong>使用
                                <code>Bar.prototype = Foo</code>，因为这不会执行
                                <code>Foo</code>的原型，而是指向函数
                                <code>Foo</code>。 因此原型链将会回溯到
                                <code>Function.prototype</code>而不是
                                <code>Foo.prototype</code>，因此
                                <code>method</code>将不会在 Bar 的原型链上。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>属性查找</h3>
                        <p>当查找一个对象的属性时，JavaScript 会
                            <strong>向上</strong>遍历原型链，直到找到给定名称的属性为止。</p>
                        <p>到查找到达原型链的顶部 - 也就是
                            <code>Object.prototype</code>- 但是仍然没有找到指定的属性，就会返回 <a href="#core.undefined">undefined</a>。</p>
                    </div>
                    <div>
                        <h3>原型属性</h3>
                        <p>当原型属性用来创建原型链时，可以把
                            <strong>任何</strong>类型的值赋给它（prototype）。 然而将原子类型赋给 prototype 的操作将会被忽略。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 无效</span>
                            </code>
                        </pre>
                        <p>而将对象赋值给 prototype，正如上面的例子所示，将会动态的创建原型链。</p>
                    </div>
                    <div>
                        <h3>性能</h3>
                        <p>如果一个属性在原型链的上端，则对于查找时间将带来不利影响。特别的，试图获取一个不存在的属性将会遍历整个原型链。</p>
                        <p>并且，当使用
                            <a href="#object.forinloop">
                                <code>for in</code>
                            </a>循环遍历对象的属性时，原型链上的
                            <strong>所有</strong>属性都将被访问。</p>
                    </div>
                    <div>
                        <h3>扩展内置类型的原型</h3>
                        <p>一个错误特性被经常使用，那就是扩展
                            <code>Object.prototype</code>或者其他内置类型的原型对象。</p>
                        <p>这种技术被称之为 <a href="http://en.wikipedia.org/wiki/Monkey_patch">monkey patching</a> 并且会破坏
                            <em>封装</em>。虽然它被广泛的应用到一些 JavaScript 类库中比如 <a href="http://prototypejs.org/">Prototype</a>, 但是我仍然不认为为内置类型添加一些
                            <em>非标准</em>的函数是个好主意。</p>
                        <p>扩展内置类型的
                            <strong>唯一</strong>理由是为了和新的 JavaScript 保持一致，比如
                            <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach">
                                <code>Array.forEach</code>
                            </a>。</p>
                        <aside>
                            <p>
                                <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>这是编程领域常用的一种方式，称之为 <a href="http://en.wikipedia.org/wiki/Backport">Backport</a>，也就是将新的补丁添加到老版本中。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>总结</h3>
                        <p>在写复杂的 JavaScript 应用之前，充分理解原型链继承的工作方式是每个 JavaScript 程序员
                            <strong>必修</strong>的功课。 要提防原型链过长带来的性能问题，并知道如何通过缩短原型链来提高性能。 更进一步，绝对
                            <strong>不要</strong>扩展内置类型的原型，除非是为了和新的 JavaScript 引擎兼容。</p>
                    </div>
                </article>
                <article id="object.hasownproperty">
                    <h2>
                        <code>hasOwnProperty</code>函数</h2>
                    <div>
                        <p>为了判断一个对象是否包含
                            <em>自定义</em>属性而
                            <em>不是</em><a href="#object.prototype">原型链</a>上的属性， 我们需要使用继承自
                            <code>Object.prototype</code>的
                            <code>hasOwnProperty</code>方法。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>通过判断一个属性是否
                                <code>undefined</code>是
                                <strong>不够</strong>的。 因为一个属性可能确实存在，只不过它的值被设置为
                                <code>undefined</code>。</p>
                        </aside>
                        <p>
                            <code>hasOwnProperty</code>是 JavaScript 中唯一一个处理属性但是
                            <strong>不</strong>查找原型链的函数。</p>
                        <pre>
                            <code>
                                <span class="com">// 修改Object.prototype</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Object</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">goo</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">undefined</span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">bar</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 1</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="str">'bar'</span>
                                <span class="pln"></span>
                                <span class="kwd">in</span>
                                <span class="pln">foo</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// true</span>
                                <span class="pln">
                                    <br>
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">hasOwnProperty</span>
                                <span class="pun">(</span>
                                <span class="str">'bar'</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// false</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">hasOwnProperty</span>
                                <span class="pun">(</span>
                                <span class="str">'goo'</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// true</span>
                            </code>
                        </pre>
                        <p>只有
                            <code>hasOwnProperty</code>可以给出正确和期望的结果，这在遍历对象的属性时会很有用。
                            <strong>没有</strong>其它方法可以用来排除原型链上的属性，而不是定义在对象
                            <em>自身</em>上的属性。</p>
                    </div>
                    <div>
                        <h3>
                            <code>hasOwnProperty</code>作为属性</h3>
                        <p>JavaScript
                            <strong>不会</strong>保护
                            <code>hasOwnProperty</code>被非法占用，因此如果一个对象碰巧存在这个属性， 就需要使用
                            <em>外部</em>的
                            <code>hasOwnProperty</code>函数来获取正确的结果。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; hasOwnProperty</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="kwd">false</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">},</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; bar</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="str">'Here be dragons'</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">hasOwnProperty</span>
                                <span class="pun">(</span>
                                <span class="str">'bar'</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// 总是返回 false</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 使用其它对象的 hasOwnProperty，并将其上下文设置为foo</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">({}).</span>
                                <span class="pln">hasOwnProperty</span>
                                <span class="pun">.</span>
                                <span class="pln">call</span>
                                <span class="pun">(</span>
                                <span class="pln">foo</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="str">'bar'</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// true</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>结论</h3>
                        <p>当检查对象上某个属性是否存在时，
                            <code>hasOwnProperty</code>是
                            <strong>唯一</strong>可用的方法。 同时在使用
                            <a href="#object.forinloop">
                                <code>for in</code>loop</a>遍历对象时，推荐
                            <strong>总是</strong>使用
                            <code>hasOwnProperty</code>方法， 这将会避免
                            <a href="#object.prototype">原型</a>对象扩展带来的干扰。</p>
                    </div>
                </article>
                <article id="object.forinloop">
                    <h2>
                        <code>for in</code>循环</h2>
                    <div>
                        <p>和
                            <code>in</code>操作符一样，
                            <code>for in</code>循环同样在查找对象属性时遍历原型链上的所有属性。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>
                                <code>for in</code>循环
                                <strong>不会</strong>遍历那些
                                <code>enumerable</code>设置为
                                <code>false</code>的属性；比如数组的
                                <code>length</code>属性。</p>
                        </aside>
                        <pre>
                            <code>
                                <span class="com">// 修改 Object.prototype</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Object</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">moo</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="kwd">in</span>
                                <span class="pln">foo</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// 输出两个属性：bar 和 moo</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>由于不可能改变
                            <code>for in</code>自身的行为，因此有必要过滤出那些不希望出现在循环体中的属性， 这可以通过
                            <code>Object.prototype</code>原型上的
                            <a href="#object.hasownproperty">
                                <code>hasOwnProperty</code>
                            </a>函数来完成。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>由于
                                <code>for in</code>总是要遍历整个原型链，因此如果一个对象的继承层次太深的话会影响性能。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>使用
                            <code>hasOwnProperty</code>过滤</h3>
                        <pre>
                            <code>
                                <span class="com">// foo 变量是上例中的</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="kwd">in</span>
                                <span class="pln">foo</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">if</span>
                                <span class="pln"></span>
                                <span class="pun">(</span>
                                <span class="pln">foo</span>
                                <span class="pun">.</span>
                                <span class="pln">hasOwnProperty</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">))</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>这个版本的代码是唯一正确的写法。由于我们使用了
                            <code>hasOwnProperty</code>，所以这次
                            <strong>只</strong>输出
                            <code>moo</code>。 如果不使用
                            <code>hasOwnProperty</code>，则这段代码在原生对象原型（比如
                            <code>Object.prototype</code>）被扩展时可能会出错。</p>
                        <p>一个广泛使用的类库 <a href="http://www.prototypejs.org/">Prototype</a> 就扩展了原生的 JavaScript 对象。 因此，当这个类库被包含在页面中时，不使用
                            <code>hasOwnProperty</code>过滤的
                            <code>for in</code>循环难免会出问题。</p>
                    </div>
                    <div>
                        <h3>总结</h3>
                        <p>推荐
                            <strong>总是</strong>使用
                            <code>hasOwnProperty</code>。不要对代码运行的环境做任何假设，不要假设原生对象是否已经被扩展了。</p>
                    </div>
                </article>
            </section>
            <section id="function">
                <!-- Introduction-->
                <header id="function.intro">
                    <h1>函数</h1>
                </header>
                <!-- Articles-->
                <article id="function.general">
                    <h2>函数声明与表达式</h2>
                    <div>
                        <p>函数是JavaScript中的一等对象，这意味着可以把函数像其它值一样传递。 一个常见的用法是把
                            <em>匿名函数</em>作为回调函数传递到异步函数中。</p>
                    </div>
                    <div>
                        <h3>函数声明</h3>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln">foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                            </code>
                        </pre>
                        <p>上面的方法会在执行前被 <a href="#function.scopes">解析(hoisted)</a>，因此它存在于当前上下文的
                            <em>任意</em>一个地方， 即使在函数定义体的上面被调用也是对的。</p>
                        <pre>
                            <code>
                                <span class="pln">foo</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 正常运行，因为foo在代码运行前已经被创建</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>函数赋值表达式</h3>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                            </code>
                        </pre>
                        <p>这个例子把一个
                            <em>匿名</em>的函数赋值给变量
                            <code>foo</code>。</p>
                        <pre>
                            <code>
                                <span class="pln">foo</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 'undefined'</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 出错：TypeError</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                            </code>
                        </pre>
                        <p>由于
                            <code>var</code>定义了一个声明语句，对变量
                            <code>foo</code>的解析是在代码运行之前，因此
                            <code>foo</code>变量在代码运行时已经被定义过了。</p>
                        <p>但是由于赋值语句只在运行时执行，因此在相应代码执行之前，
                            <code>foo</code>的值缺省为 <a href="#core.undefined">undefined</a>。</p>
                    </div>
                    <div>
                        <h3>命名函数的赋值表达式</h3>
                        <p>另外一个特殊的情况是将命名函数赋值给一个变量。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pln">bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; bar</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 正常运行</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>bar</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 出错：ReferenceError</span>
                            </code>
                        </pre>
                        <p>
                            <code>bar</code>函数声明外是不可见的，这是因为我们已经把函数赋值给了
                            <code>foo</code>； 然而在
                            <code>bar</code>内部依然可见。这是由于 JavaScript 的 <a href="#function.scopes">命名处理</a> 所致， 函数名在函数内
                            <em>总是</em>可见的。</p>
                    </div>
                </article>
                <article id="function.this">
                    <h2>
                        <code>this</code>的工作原理</h2>
                    <div>
                        <p>JavaScript 有一套完全不同于其它语言的对
                            <code>this</code>的处理机制。 在
                            <strong>五</strong>种不同的情况下 ，
                            <code>this</code>指向的各不相同。</p>
                    </div>
                    <div>
                        <h3>全局范围内</h3>
                        <pre>
                            <code>
                                <span class="kwd">this</span>
                                <span class="pun">;</span>
                            </code>
                        </pre>
                        <p>当在全部范围内使用
                            <code>this</code>，它将会指向
                            <em>全局</em>对象。</p>
                        <aside>
                            <p>
                                <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>浏览器中运行的 JavaScript 脚本，这个全局对象是
                                <code>window</code>。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>函数调用</h3>
                        <pre>
                            <code>
                                <span class="pln">foo</span>
                                <span class="pun">();</span>
                            </code>
                        </pre>
                        <p>这里
                            <code>this</code>也会指向
                            <em>全局</em>对象。</p>
                        <aside class="es5">
                            <p>
                                <strong>ES5 注意:</strong>在严格模式下（strict mode），不存在全局变量。 这种情况下
                                <code>this</code>将会是
                                <code>undefined</code>。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>方法调用</h3>
                        <pre>
                            <code>
                                <span class="pln">test</span>
                                <span class="pun">.</span>
                                <span class="pln">foo</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                            </code>
                        </pre>
                        <p>这个例子中，
                            <code>this</code>指向
                            <code>test</code>对象。</p>
                    </div>
                    <div>
                        <h3>调用构造函数</h3>
                        <pre>
                            <code>
                                <span class="kwd">new</span>
                                <span class="pln">foo</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                            </code>
                        </pre>
                        <p>如果函数倾向于和
                            <code>new</code>关键词一块使用，则我们称这个函数是 <a href="#function.constructors">构造函数</a>。 在函数内部，
                            <code>this</code>指向
                            <em>新创建</em>的对象。</p>
                    </div>
                    <div>
                        <h3>显式的设置
                            <code>this</code>
                        </h3>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln">foo</span>
                                <span class="pun">(</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">b</span>
                                <span class="pun">,</span>
                                <span class="pln">c</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">apply</span>
                                <span class="pun">(</span>
                                <span class="pln">bar</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="pun">[</span>
                                <span class="lit">1</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">3</span>
                                <span class="pun">]);</span>
                                <span class="pln"></span>
                                <span class="com">// 数组将会被扩展，如下所示</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">call</span>
                                <span class="pun">(</span>
                                <span class="pln">bar</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">3</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// 传递到foo的参数是：a = 1, b = 2, c = 3</span>
                            </code>
                        </pre>
                        <p>当使用
                            <code>Function.prototype</code>上的
                            <code>call</code>或者
                            <code>apply</code>方法时，函数内的
                            <code>this</code>将会被
                            <strong>显式设置</strong>为函数调用的第一个参数。</p>
                        <p>因此
                            <em>函数调用</em>的规则在上例中已经不适用了，在
                            <code>foo</code>函数内
                            <code>this</code>被设置成了
                            <code>bar</code>。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>在对象的字面声明语法中，
                                <code>this</code>
                                <strong>不能</strong>用来指向对象本身。 因此
                                <code>var obj = {me: this}</code>中的
                                <code>me</code>不会指向
                                <code>obj</code>，因为
                                <code>this</code>只可能出现在上述的五种情况中。
                                <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>这个例子中，如果是在浏览器中运行，
                                <code>obj.me</code>等于
                                <code>window</code>对象。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>常见误解</h3>
                        <p>尽管大部分的情况都说的过去，不过第一个规则（
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>这里指的应该是第二个规则，也就是直接调用函数时，
                            <code>this</code>指向全局对象） 被认为是JavaScript语言另一个错误设计的地方，因为它
                            <strong>从来</strong>就没有实际的用途。</p>
                        <pre>
                            <code>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="com">// this 将会被设置为全局对象（译者注：浏览器环境中也就是 window 对象）</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; test</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>一个常见的误解是
                            <code>test</code>中的
                            <code>this</code>将会指向
                            <code>Foo</code>对象，实际上
                            <strong>不是</strong>这样子的。</p>
                        <p>为了在
                            <code>test</code>中获取对
                            <code>Foo</code>对象的引用，我们需要在
                            <code>method</code>函数内部创建一个局部变量指向
                            <code>Foo</code>对象。</p>
                        <pre>
                            <code>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">that</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">this</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="com">// 使用 that 来指向 Foo 对象</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; test</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>
                            <code>that</code>只是我们随意起的名字，不过这个名字被广泛的用来指向外部的
                            <code>this</code>对象。 在 <a href="#function.closures">闭包</a> 一节，我们可以看到
                            <code>that</code>可以作为参数传递。</p>
                    </div>
                    <div>
                        <h3>方法的赋值表达式</h3>
                        <p>另一个看起来奇怪的地方是函数别名，也就是将一个方法
                            <strong>赋值</strong>给一个变量。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">test</span>
                                <span class="pun">=</span>
                                <span class="pln">someObject</span>
                                <span class="pun">.</span>
                                <span class="pln">methodTest</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>test</span>
                                <span class="pun">();</span>
                            </code>
                        </pre>
                        <p>上例中，
                            <code>test</code>就像一个普通的函数被调用；因此，函数内的
                            <code>this</code>将不再被指向到
                            <code>someObject</code>对象。</p>
                        <p>虽然
                            <code>this</code>的晚绑定特性似乎并不友好，但是这确实<a href="#object.prototype">基于原型继承</a>赖以生存的土壤。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Bar</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">().</span>
                                <span class="pln">method</span>
                                <span class="pun">();</span>
                            </code>
                        </pre>
                        <p>当
                            <code>method</code>被调用时，
                            <code>this</code>将会指向
                            <code>Bar</code>的实例对象。</p>
                    </div>
                </article>
                <article id="function.closures">
                    <h2>闭包和引用</h2>
                    <div>
                        <p>闭包是 JavaScript 一个非常重要的特性，这意味着当前作用域
                            <strong>总是</strong>能够访问外部作用域中的变量。 因为 <a href="#function.scopes">函数</a> 是 JavaScript 中唯一拥有自身作用域的结构，因此闭包的创建依赖于函数。</p>
                    </div>
                    <div>
                        <h3>模拟私有变量</h3>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Counter</span>
                                <span class="pun">(</span>
                                <span class="pln">start</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">count</span>
                                <span class="pun">=</span>
                                <span class="pln">start</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; increment</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; count</span>
                                <span class="pun">++;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">},</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">get</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln">count</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="typ">Counter</span>
                                <span class="pun">(</span>
                                <span class="lit">4</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">increment</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="kwd">get</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 5</span>
                            </code>
                        </pre>
                        <p>这里，
                            <code>Counter</code>函数返回两个闭包，函数
                            <code>increment</code>和函数
                            <code>get</code>。 这两个函数都维持着 对外部作用域
                            <code>Counter</code>的引用，因此总可以访问此作用域内定义的变量
                            <code>count</code>.</p>
                    </div>
                    <div>
                        <h3>为什么不可以在外部访问私有变量</h3>
                        <p>因为 JavaScript 中不可以对作用域进行引用或赋值，因此没有办法在外部访问
                            <code>count</code>变量。 唯一的途径就是通过那两个闭包。
                        </p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Counter</span>
                                <span class="pun">(</span>
                                <span class="lit">4</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">.</span>
                                <span class="pln">hack</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; count</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1337</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                            </code>
                        </pre>
                        <p>上面的代码
                            <strong>不会</strong>改变定义在
                            <code>Counter</code>作用域中的
                            <code>count</code>变量的值，因为
                            <code>foo.hack</code>没有 定义在那个
                            <strong>作用域</strong>内。它将会创建或者覆盖
                            <em>全局</em>变量
                            <code>count</code>。</p>
                    </div>
                    <div>
                        <h3>循环中的闭包</h3>
                        <p>一个常见的错误出现在循环中使用闭包，假设我们需要在每次循环中调用循环序号</p>
                        <pre>
                            <code>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">10</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; setTimeout</span>
                                <span class="pun">(</span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">);</span>
                                <span class="pln">&nbsp;
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">},</span>
                                <span class="pln"></span>
                                <span class="lit">1000</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>上面的代码不会输出数字
                            <code>0</code>到
                            <code>9</code>，而是会输出数字
                            <code>10</code>十次。</p>
                        <p>当
                            <code>console.log</code>被调用的时候，
                            <em>匿名</em>函数保持对外部变量
                            <code>i</code>的引用，此时
                            <code>for</code>循环已经结束，
                            <code>i</code>的值被修改成了
                            <code>10</code>.</p>
                        <p>为了得到想要的结果，需要在每次循环中创建变量
                            <code>i</code>的
                            <strong>拷贝</strong>。</p>
                    </div>
                    <div>
                        <h3>避免引用错误</h3>
                        <p>为了正确的获得循环序号，最好使用 <a href="#function.scopes">匿名包裹器</a>（
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>其实就是我们通常说的自执行匿名函数）。</p>
                        <pre>
                            <code>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">10</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">(</span>
                                <span class="kwd">function</span>
                                <span class="pun">(</span>
                                <span class="pln">e</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; setTimeout</span>
                                <span class="pun">(</span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">e</span>
                                <span class="pun">);</span>
                                <span class="pln">&nbsp;
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">},</span>
                                <span class="pln"></span>
                                <span class="lit">1000</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">})(</span>
                                <span class="pln">i</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>外部的匿名函数会立即执行，并把
                            <code>i</code>作为它的参数，此时函数内
                            <code>e</code>变量就拥有了
                            <code>i</code>的一个拷贝。</p>
                        <p>当传递给
                            <code>setTimeout</code>的匿名函数执行时，它就拥有了对
                            <code>e</code>的引用，而这个值是
                            <strong>不会</strong>被循环改变的。</p>
                        <p>有另一个方法完成同样的工作；那就是从匿名包装器中返回一个函数。这和上面的代码效果一样。</p>
                        <pre>
                            <code>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">10</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; setTimeout</span>
                                <span class="pun">((</span>
                                <span class="kwd">function</span>
                                <span class="pun">(</span>
                                <span class="pln">e</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">e</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">})(</span>
                                <span class="pln">i</span>
                                <span class="pun">),</span>
                                <span class="pln"></span>
                                <span class="lit">1000</span>
                                <span class="pun">)</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                    </div>
                </article>
                <article id="function.arguments">
                    <h2>
                        <code>arguments</code>对象</h2>
                    <div>
                        <p>JavaScript 中每个函数内都能访问一个特别变量
                            <code>arguments</code>。这个变量维护着所有传递到这个函数中的参数列表。</p>
                        <aside>
                            <p>
                                <strong>注意:</strong>由于
                                <code>arguments</code>已经被定义为函数内的一个变量。 因此通过
                                <code>var</code>关键字定义
                                <code>arguments</code>或者将
                                <code>arguments</code>声明为一个形式参数， 都将导致原生的
                                <code>arguments</code>不会被创建。</p>
                        </aside>
                        <p>
                            <code>arguments</code>变量
                            <strong>不是</strong>一个数组（
                            <code>Array</code>）。 尽管在语法上它有数组相关的属性
                            <code>length</code>，但它不从
                            <code>Array.prototype</code>继承，实际上它是一个对象（
                            <code>Object</code>）。</p>
                        <p>因此，无法对
                            <code>arguments</code>变量使用标准的数组方法，比如
                            <code>push</code>,
                            <code>pop</code>或者
                            <code>slice</code>。 虽然使用
                            <code>for</code>循环遍历也是可以的，但是为了更好的使用数组方法，最好把它转化为一个真正的数组。</p>
                    </div>
                    <div>
                        <h3>转化为数组</h3>
                        <p>下面的代码将会创建一个新的数组，包含所有
                            <code>arguments</code>对象中的元素。</p>
                        <pre>
                            <code>
                                <span class="typ">Array</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">slice</span>
                                <span class="pun">.</span>
                                <span class="pln">call</span>
                                <span class="pun">(</span>
                                <span class="pln">arguments</span>
                                <span class="pun">);</span>
                            </code>
                        </pre>
                        <p>这个转化比较
                            <strong>慢</strong>，在性能不好的代码中
                            <strong>不推荐</strong>这种做法。</p>
                    </div>
                    <div>
                        <h3>传递参数</h3>
                        <p>下面将参数从一个函数传递到另一个函数，是推荐的做法。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln">foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; bar</span>
                                <span class="pun">.</span>
                                <span class="pln">apply</span>
                                <span class="pun">(</span>
                                <span class="kwd">null</span>
                                <span class="pun">,</span>
                                <span class="pln">arguments</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">bar</span>
                                <span class="pun">(</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">b</span>
                                <span class="pun">,</span>
                                <span class="pln">c</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="com">// do stuff here</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>另一个技巧是同时使用
                            <code>call</code>和
                            <code>apply</code>，创建一个快速的解绑定包装器。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">(</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">b</span>
                                <span class="pun">,</span>
                                <span class="pln">c</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="kwd">this</span>
                                <span class="pun">,</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">b</span>
                                <span class="pun">,</span>
                                <span class="pln">c</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// Create an unbound version of "method"</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="com">// 输入参数为: this, arg1, arg2...argN</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="com">// 结果: Foo.prototype.method.call(this, arg1, arg2... argN)</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="typ">Function</span>
                                <span class="pun">.</span>
                                <span class="pln">call</span>
                                <span class="pun">.</span>
                                <span class="pln">apply</span>
                                <span class="pun">(</span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">,</span>
                                <span class="pln">arguments</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                            </code>
                        </pre>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>
                            </strong>：上面的
                            <code>Foo.method</code>函数和下面代码的效果是一样的:</p>
                        <pre>
                            <code>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">args</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="typ">Array</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">slice</span>
                                <span class="pun">.</span>
                                <span class="pln">call</span>
                                <span class="pun">(</span>
                                <span class="pln">arguments</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">.</span>
                                <span class="pln">apply</span>
                                <span class="pun">(</span>
                                <span class="pln">args</span>
                                <span class="pun">[</span>
                                <span class="lit">0</span>
                                <span class="pun">],</span>
                                <span class="pln">args</span>
                                <span class="pun">.</span>
                                <span class="pln">slice</span>
                                <span class="pun">(</span>
                                <span class="lit">1</span>
                                <span class="pun">));</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>自动更新</h3>
                        <p>
                            <code>arguments</code>对象为其内部属性以及函数形式参数创建
                            <em>getter</em>和
                            <em>setter</em>方法。</p>
                        <p>因此，改变形参的值会影响到
                            <code>arguments</code>对象的值，反之亦然。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln">foo</span>
                                <span class="pun">(</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">b</span>
                                <span class="pun">,</span>
                                <span class="pln">c</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; arguments</span>
                                <span class="pun">[</span>
                                <span class="lit">0</span>
                                <span class="pun">]</span>
                                <span class="pln"></span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; a</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp; b</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">4</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; arguments</span>
                                <span class="pun">[</span>
                                <span class="lit">1</span>
                                <span class="pun">];</span>
                                <span class="pln"></span>
                                <span class="com">// 4</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">d</span>
                                <span class="pun">=</span>
                                <span class="pln">c</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; d</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">9</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; c</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 3</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">(</span>
                                <span class="lit">1</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">3</span>
                                <span class="pun">);</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>性能真相</h3>
                        <p>
                            <code>arguments</code>对象总会被创建，除了两个特殊情况 - 作为局部变量声明和作为形式参数。 而不管它是否有被使用。
                        </p>
                        <p>
                            <code>arguments</code>的
                            <em>getters</em>和
                            <em>setters</em>方法总会被创建；因此使用
                            <code>arguments</code>对性能不会有什么影响。 除非是需要对
                            <code>arguments</code>对象的属性进行多次访问。</p>
                        <aside class="es5">
                            <p>
                                <strong>ES5 提示:</strong>这些
                                <em>getters</em>和
                                <em>setters</em>在严格模式下（strict mode）不会被创建。</p>
                        </aside>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>在 <a href="https://developer.mozilla.org/en/JavaScript/Strict_mode">MDC</a> 中对
                            <code>strict mode</code>模式下
                            <code>arguments</code>的描述有助于我们的理解，请看下面代码：</p>
                        <pre>
                            <code>
                                <span class="com">// 阐述在 ES5 的严格模式下 `arguments` 的特性</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">f</span>
                                <span class="pun">(</span>
                                <span class="pln">a</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp;</span>
                                <span class="str">"use strict"</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; a</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">42</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="pun">[</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">arguments</span>
                                <span class="pun">[</span>
                                <span class="lit">0</span>
                                <span class="pun">]];</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">pair</span>
                                <span class="pun">=</span>
                                <span class="pln">f</span>
                                <span class="pun">(</span>
                                <span class="lit">17</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">assert</span>
                                <span class="pun">(</span>
                                <span class="pln">pair</span>
                                <span class="pun">[</span>
                                <span class="lit">0</span>
                                <span class="pun">]</span>
                                <span class="pln"></span>
                                <span class="pun">===</span>
                                <span class="pln"></span>
                                <span class="lit">42</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">assert</span>
                                <span class="pun">(</span>
                                <span class="pln">pair</span>
                                <span class="pun">[</span>
                                <span class="lit">1</span>
                                <span class="pun">]</span>
                                <span class="pln"></span>
                                <span class="pun">===</span>
                                <span class="pln"></span>
                                <span class="lit">17</span>
                                <span class="pun">);</span>
                            </code>
                        </pre>
                        <p>然而，的确有一种情况会显著的影响现代 JavaScript 引擎的性能。这就是使用
                            <code>arguments.callee</code>。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln">foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; arguments</span>
                                <span class="pun">.</span>
                                <span class="pln">callee</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// do something with this function object</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; arguments</span>
                                <span class="pun">.</span>
                                <span class="pln">callee</span>
                                <span class="pun">.</span>
                                <span class="kwd">caller</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// and the calling function object</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">bigLoop</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">100000</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; foo</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// Would normally be inlined...</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>上面代码中，
                            <code>foo</code>不再是一个单纯的内联函数 <a href="http://en.wikipedia.org/wiki/Inlining">inlining</a>（
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>
                            </strong>：这里指的是解析器可以做内联处理）， 因为它需要知道它自己和它的调用者。 这不仅抵消了内联函数带来的性能提升，而且破坏了封装，因此现在函数可能要依赖于特定的上下文。
                        </p>
                        <p>因此
                            <strong>强烈</strong>建议大家
                            <strong>不要</strong>使用
                            <code>arguments.callee</code>和它的属性。</p>
                        <aside class="es5">
                            <p>
                                <strong>ES5 提示:</strong>在严格模式下，
                                <code>arguments.callee</code>会报错
                                <code>TypeError</code>，因为它已经被废除了。</p>
                        </aside>
                    </div>
                </article>
                <article id="function.constructors">
                    <h2>构造函数</h2>
                    <div>
                        <p>JavaScript 中的构造函数和其它语言中的构造函数是不同的。 通过
                            <code>new</code>关键字方式调用的函数都被认为是构造函数。</p>
                        <p>在构造函数内部 - 也就是被调用的函数内 -
                            <code>this</code>指向新创建的对象
                            <code>Object</code>。 这个
                            <strong>新创建</strong>的对象的
                            <a href="#object.prototype">
                                <code>prototype</code>
                            </a>被指向到构造函数的
                            <code>prototype</code>。</p>
                        <p>如果被调用的函数没有显式的
                            <code>return</code>表达式，则隐式的会返回
                            <code>this</code>对象 - 也就是新创建的对象。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">this</span>
                                <span class="pun">.</span>
                                <span class="pln">bla</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">.</span>
                                <span class="pln">test</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="kwd">this</span>
                                <span class="pun">.</span>
                                <span class="pln">bla</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">test</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">();</span>
                            </code>
                        </pre>
                        <p>上面代码把
                            <code>Foo</code>作为构造函数调用，并设置新创建对象的
                            <code>prototype</code>为
                            <code>Foo.prototype</code>。</p>
                        <p>显式的
                            <code>return</code>表达式将会影响返回结果，但
                            <strong>仅限</strong>于返回的是一个对象。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 返回新创建的对象</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Test</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">this</span>
                                <span class="pun">.</span>
                                <span class="pln">value</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; foo</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Test</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 返回的对象</span>
                            </code>
                        </pre>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>
                            <code>new Bar()</code>返回的是新创建的对象，而不是数字的字面值 2。 因此
                            <code>new Bar().constructor === Bar</code>，但是如果返回的是数字对象，结果就不同了，如下所示</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Number</span>
                                <span class="pun">(</span>
                                <span class="lit">2</span>
                                <span class="pun">);</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">().</span>
                                <span class="pln">constructor</span>
                                <span class="pun">===</span>
                                <span class="pln"></span>
                                <span class="typ">Number</span>
                            </code>
                        </pre>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>这里得到的
                            <code>new Test()</code>是函数返回的对象，而不是通过
                            <code>new</code>关键字新创建的对象，因此：</p>
                        <pre>
                            <code>
                                <span class="pun">(</span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Test</span>
                                <span class="pun">()).</span>
                                <span class="pln">value</span>
                                <span class="pun">===</span>
                                <span class="pln"></span>
                                <span class="kwd">undefined</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">(</span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Test</span>
                                <span class="pun">()).</span>
                                <span class="pln">foo</span>
                                <span class="pun">===</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                            </code>
                        </pre>
                        <p>如果
                            <code>new</code>被遗漏了，则函数
                            <strong>不会</strong>返回新创建的对象。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">this</span>
                                <span class="pun">.</span>
                                <span class="pln">bla</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 获取设置全局参数</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Foo</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// undefined</span>
                            </code>
                        </pre>
                        <p>虽然上例在有些情况下也能正常运行，但是由于 JavaScript 中
                            <a href="#function.this">
                                <code>this</code>
                            </a>的工作原理， 这里的
                            <code>this</code>指向
                            <em>全局对象</em>。</p>
                    </div>
                    <div>
                        <h3>工厂模式</h3>
                        <p>为了不使用
                            <code>new</code>关键字，构造函数必须显式的返回一个值。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">value</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; method</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln">value</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Bar</span>
                                <span class="pun">.</span>
                                <span class="pln">prototype</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; foo</span>
                                <span class="pun">:</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="typ">Bar</span>
                                <span class="pun">();</span>
                            </code>
                        </pre>
                        <p>上面两种对
                            <code>Bar</code>函数的调用返回的值完全相同，一个新创建的拥有
                            <code>method</code>属性的对象被返回， 其实这里创建了一个
                            <a href="#function.closures">闭包</a>。</p>
                        <p>还需要注意，
                            <code>new Bar()</code>并
                            <strong>不会</strong>改变返回对象的原型（
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>也就是返回对象的原型不会指向
                            <code>Bar.prototype</code>）。 因为构造函数的原型会被指向到刚刚创建的新对象，而这里的
                            <code>Bar</code>没有把这个新对象返回（<a href="http://cnblogs.com/sanshi/">译者注</a>：而是返回了一个包含
                            <code>method</code>属性的自定义对象）。</p>
                        <p>在上面的例子中，使用或者不使用
                            <code>new</code>关键字没有功能性的区别。</p>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>上面两种方式创建的对象不能访问
                            <code>Bar</code>原型链上的属性，如下所示：</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln">bar1</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">new</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">typeof</span>
                                <span class="pun">(</span>
                                <span class="pln">bar1</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// "function"</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">typeof</span>
                                <span class="pun">(</span>
                                <span class="pln">bar1</span>
                                <span class="pun">.</span>
                                <span class="pln">foo</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// "undefined"</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">bar2</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="typ">Bar</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">typeof</span>
                                <span class="pun">(</span>
                                <span class="pln">bar2</span>
                                <span class="pun">.</span>
                                <span class="pln">method</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// "function"</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">typeof</span>
                                <span class="pun">(</span>
                                <span class="pln">bar2</span>
                                <span class="pun">.</span>
                                <span class="pln">foo</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// "undefined"</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>通过工厂模式创建新对象</h3>
                        <p>我们常听到的一条忠告是
                            <strong>不要</strong>使用
                            <code>new</code>关键字来调用函数，因为如果忘记使用它就会导致错误。</p>
                        <p>为了创建新对象，我们可以创建一个工厂方法，并且在方法内构造一个新对象。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln"></span>
                                <span class="typ">Foo</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">obj</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; obj</span>
                                <span class="pun">.</span>
                                <span class="pln">value</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'blub'</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln"></span>
                                <span class="kwd">private</span>
                                <span class="pln"></span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; obj</span>
                                <span class="pun">.</span>
                                <span class="pln">someMethod</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">(</span>
                                <span class="pln">value</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">this</span>
                                <span class="pun">.</span>
                                <span class="pln">value</span>
                                <span class="pun">=</span>
                                <span class="pln">value</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp; obj</span>
                                <span class="pun">.</span>
                                <span class="pln">getPrivate</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln"></span>
                                <span class="kwd">private</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln">obj</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>虽然上面的方式比起
                            <code>new</code>的调用方式不容易出错，并且可以充分利用<a href="#function.closures">私有变量</a>带来的便利， 但是随之而来的是一些不好的地方。
                        </p>
                        <ol>
                            <li>会占用更多的内存，因为新创建的对象
                                <strong>不能</strong>共享原型上的方法。</li>
                            <li>为了实现继承，工厂方法需要从另外一个对象拷贝所有属性，或者把一个对象作为新创建对象的原型。</li>
                            <li>放弃原型链仅仅是因为防止遗漏
                                <code>new</code>带来的问题，这似乎和语言本身的思想相违背。</li>
                        </ol>
                    </div>
                    <div>
                        <h3>总结</h3>
                        <p>虽然遗漏
                            <code>new</code>关键字可能会导致问题，但这并
                            <strong>不是</strong>放弃使用原型链的借口。 最终使用哪种方式取决于应用程序的需求，选择一种代码书写风格并
                            <strong>坚持</strong>下去才是最重要的。</p>
                    </div>
                </article>
                <article id="function.scopes">
                    <h2>作用域与命名空间</h2>
                    <div>
                        <p>尽管 JavaScript 支持一对花括号创建的代码段，但是并不支持块级作用域； 而仅仅支持
                            <em>函数作用域</em>。</p>
                        <pre>
                            <code>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln"></span>
                                <span class="com">// 一个作用域</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">10</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln"></span>
                                <span class="com">// 不是一个作用域</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="com">// count</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// 10</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <aside>
                            <p>
                                <strong>注意:</strong>如果不是在赋值语句中，而是在 return 表达式或者函数参数中，
                                <code>{...}</code>将会作为代码段解析， 而不是作为对象的字面语法解析。如果考虑到 <a href="#core.semicolon">自动分号插入</a>，这可能会导致一些不易察觉的错误。</p>
                        </aside>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>如果
                            <code>return</code>对象的左括号和
                            <code>return</code>不在一行上就会出错。</p>
                        <pre>
                            <code>
                                <span class="com">// 译者注：下面输出 undefined</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">add</span>
                                <span class="pun">(</span>
                                <span class="pln">a</span>
                                <span class="pun">,</span>
                                <span class="pln">b</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">return</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; a</span>
                                <span class="pun">+</span>
                                <span class="pln">b</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>console</span>
                                <span class="pun">.</span>
                                <span class="pln">log</span>
                                <span class="pun">(</span>
                                <span class="pln">add</span>
                                <span class="pun">(</span>
                                <span class="lit">1</span>
                                <span class="pun">,</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">));</span>
                            </code>
                        </pre>
                        <p>JavaScript 中没有显式的命名空间定义，这就意味着所有对象都定义在一个
                            <em>全局共享</em>的命名空间下面。</p>
                        <p>每次引用一个变量，JavaScript 会向上遍历整个作用域直到找到这个变量为止。 如果到达全局作用域但是这个变量仍未找到，则会抛出
                            <code>ReferenceError</code>异常。</p>
                    </div>
                    <div>
                        <h3>隐式的全局变量</h3>
                        <pre>
                            <code>
                                <span class="com">// 脚本 A</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'42'</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 脚本 B</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'42'</span>
                            </code>
                        </pre>
                        <p>上面两段脚本效果
                            <strong>不同</strong>。脚本 A 在
                            <em>全局</em>作用域内定义了变量
                            <code>foo</code>，而脚本 B 在
                            <em>当前</em>作用域内定义变量
                            <code>foo</code>。</p>
                        <p>再次强调，上面的效果
                            <strong>完全不同</strong>，不使用
                            <code>var</code>声明变量将会导致隐式的全局变量产生。</p>
                        <pre>
                            <code>
                                <span class="com">// 全局作用域</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">42</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="com">// 局部作用域</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">21</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>test</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>foo</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 21</span>
                            </code>
                        </pre>
                        <p>在函数
                            <code>test</code>内不使用
                            <code>var</code>关键字声明
                            <code>foo</code>变量将会覆盖外部的同名变量。 起初这看起来并不是大问题，但是当有成千上万行代码时，不使用
                            <code>var</code>声明变量将会带来难以跟踪的 BUG。</p>
                        <pre>
                            <code>
                                <span class="com">// 全局作用域</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">items</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">[</span>
                                <span class="com">/* 数组 */</span>
                                <span class="pun">];</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">10</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; subLoop</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">subLoop</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="com">// subLoop 函数作用域</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">10</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln"></span>
                                <span class="com">// 没有使用 var 声明变量</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="com">// 干活</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>外部循环在第一次调用
                            <code>subLoop</code>之后就会终止，因为
                            <code>subLoop</code>覆盖了全局变量
                            <code>i</code>。 在第二个
                            <code>for</code>循环中使用
                            <code>var</code>声明变量可以避免这种错误。 声明变量时
                            <strong>绝对不要</strong>遗漏
                            <code>var</code>关键字，除非这就是
                            <em>期望</em>的影响外部作用域的行为。</p>
                    </div>
                    <div>
                        <h3>局部变量</h3>
                        <p>JavaScript 中局部变量只可能通过两种方式声明，一个是作为<a href="#function">函数</a>参数，另一个是通过
                            <code>var</code>关键字声明。</p>
                        <pre>
                            <code>
                                <span class="com">// 全局变量</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="com">// 函数 test 内的局部作用域</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">5</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">3</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">4</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>test</span>
                                <span class="pun">(</span>
                                <span class="lit">10</span>
                                <span class="pun">);</span>
                            </code>
                        </pre>
                        <p>
                            <code>foo</code>和
                            <code>i</code>是函数
                            <code>test</code>内的局部变量，而对
                            <code>bar</code>的赋值将会覆盖全局作用域内的同名变量。</p>
                    </div>
                    <div>
                        <h3>变量声明提升（Hoisting）</h3>
                        <p>JavaScript 会
                            <strong>提升</strong>变量声明。这意味着
                            <code>var</code>表达式和
                            <code>function</code>声明都将会被提升到当前作用域的顶部。</p>
                        <pre>
                            <code>
                                <span class="pln">bar</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">someValue</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">42</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>test</span>
                                <span class="pun">();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">(</span>
                                <span class="pln">data</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">if</span>
                                <span class="pln"></span>
                                <span class="pun">(</span>
                                <span class="kwd">false</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; goo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln"></span>
                                <span class="kwd">else</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">goo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="kwd">var</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">100</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">e</span>
                                <span class="pun">=</span>
                                <span class="pln">data</span>
                                <span class="pun">[</span>
                                <span class="pln">i</span>
                                <span class="pun">];</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>上面代码在运行之前将会被转化。JavaScript 将会把
                            <code>var</code>表达式和
                            <code>function</code>声明提升到当前作用域的顶部。</p>
                        <pre>
                            <code>
                                <span class="com">// var 表达式被移动到这里</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">bar</span>
                                <span class="pun">,</span>
                                <span class="pln">someValue</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 缺省值是 'undefined'</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 函数声明也会提升</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pln">test</span>
                                <span class="pun">(</span>
                                <span class="pln">data</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">goo</span>
                                <span class="pun">,</span>
                                <span class="pln">i</span>
                                <span class="pun">,</span>
                                <span class="pln">e</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 没有块级作用域，这些变量被移动到函数顶部</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">if</span>
                                <span class="pln"></span>
                                <span class="pun">(</span>
                                <span class="kwd">false</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; goo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">1</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln"></span>
                                <span class="kwd">else</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; goo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">2</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">for</span>
                                <span class="pun">(</span>
                                <span class="pln">i</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">0</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">&lt;</span>
                                <span class="pln"></span>
                                <span class="lit">100</span>
                                <span class="pun">;</span>
                                <span class="pln">i</span>
                                <span class="pun">++)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp; e</span>
                                <span class="pun">=</span>
                                <span class="pln">data</span>
                                <span class="pun">[</span>
                                <span class="pln">i</span>
                                <span class="pun">];</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                                <span class="pln">
                                    <br>
                                    <br>bar</span>
                                <span class="pun">();</span>
                                <span class="pln"></span>
                                <span class="com">// 出错：TypeError，因为 bar 依然是 'undefined'</span>
                                <span class="pln">
                                    <br>someValue</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="lit">42</span>
                                <span class="pun">;</span>
                                <span class="pln"></span>
                                <span class="com">// 赋值语句不会被提升规则（hoisting）影响</span>
                                <span class="pln">
                                    <br>bar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>
                                    <br>test</span>
                                <span class="pun">();</span>
                            </code>
                        </pre>
                        <p>没有块级作用域不仅导致
                            <code>var</code>表达式被从循环内移到外部，而且使一些
                            <code>if</code>表达式更难看懂。</p>
                        <p>在原来代码中，
                            <code>if</code>表达式看起来修改了
                            <em>全部变量</em>
                            <code>goo</code>，实际上在提升规则被应用后，却是在修改
                            <em>局部变量</em>。</p>
                        <p>如果没有提升规则（hoisting）的知识，下面的代码看起来会抛出异常
                            <code>ReferenceError</code>。</p>
                        <pre>
                            <code>
                                <span class="com">// 检查 SomeImportantThing 是否已经被初始化</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">if</span>
                                <span class="pln"></span>
                                <span class="pun">(!</span>
                                <span class="typ">SomeImportantThing</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln"></span>
                                <span class="typ">SomeImportantThing</span>
                                <span class="pln"></span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>实际上，上面的代码正常运行，因为
                            <code>var</code>表达式会被提升到
                            <em>全局作用域</em>的顶部。</p>
                        <pre>
                            <code>
                                <span class="kwd">var</span>
                                <span class="pln"></span>
                                <span class="typ">SomeImportantThing</span>
                                <span class="pun">;</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 其它一些代码，可能会初始化 SomeImportantThing，也可能不会</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="com">// 检查是否已经被初始化</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">if</span>
                                <span class="pln"></span>
                                <span class="pun">(!</span>
                                <span class="typ">SomeImportantThing</span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="typ">SomeImportantThing</span>
                                <span class="pln"></span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="pun">{};</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">}</span>
                            </code>
                        </pre>
                        <p>
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>在 Nettuts+ 网站有一篇介绍 hoisting 的<a href="http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/">文章</a>，其中的代码很有启发性。</p>
                        <pre>
                            <code>
                                <span class="com">// 译者注：来自 Nettuts+ 的一段代码，生动的阐述了 JavaScript 中变量声明提升规则</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">var</span>
                                <span class="pln">myvar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'my value'</span>
                                <span class="pun">;</span>
                                <span class="pln">&nbsp;
                                    <br>
                                    <br>
                                </span>
                                <span class="pun">(</span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">&nbsp;
                                    <br>&nbsp; &nbsp; alert</span>
                                <span class="pun">(</span>
                                <span class="pln">myvar</span>
                                <span class="pun">);</span>
                                <span class="pln"></span>
                                <span class="com">// undefined &nbsp;</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="kwd">var</span>
                                <span class="pln">myvar</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="str">'local value'</span>
                                <span class="pun">;</span>
                                <span class="pln">&nbsp;
                                    <br>
                                </span>
                                <span class="pun">})();</span>
                                <span class="pln">&nbsp;</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>名称解析顺序</h3>
                        <p>JavaScript 中的所有作用域，包括
                            <em>全局作用域</em>，都有一个特别的名称
                            <a href="#function.this">
                                <code>this</code>
                            </a>指向当前对象。</p>
                        <p>函数作用域内也有默认的变量
                            <a href="#function.arguments">
                                <code>arguments</code>
                            </a>，其中包含了传递到函数中的参数。</p>
                        <p>比如，当访问函数内的
                            <code>foo</code>变量时，JavaScript 会按照下面顺序查找：</p>
                        <ol>
                            <li>当前作用域内是否有
                                <code>var foo</code>的定义。</li>
                            <li>函数形式参数是否有使用
                                <code>foo</code>名称的。</li>
                            <li>函数自身是否叫做
                                <code>foo</code>。</li>
                            <li>回溯到上一级作用域，然后从
                                <strong>#1</strong>重新开始。</li>
                        </ol>
                        <aside>
                            <p>
                                <strong>注意:</strong>自定义
                                <code>arguments</code>参数将会阻止原生的
                                <code>arguments</code>对象的创建。</p>
                        </aside>
                    </div>
                    <div>
                        <h3>命名空间</h3>
                        <p>只有一个全局作用域导致的常见错误是命名冲突。在 JavaScript中，这可以通过
                            <em>匿名包装器</em>轻松解决。</p>
                        <pre>
                            <code>
                                <span class="pun">(</span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="com">// 函数创建一个命名空间</span>
                                <span class="pln">
                                    <br>
                                    <br>&nbsp; &nbsp; window</span>
                                <span class="pun">.</span>
                                <span class="pln">foo</span>
                                <span class="pun">=</span>
                                <span class="pln"></span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp; &nbsp; &nbsp;</span>
                                <span class="com">// 对外公开的函数，创建了闭包</span>
                                <span class="pln">
                                    <br>&nbsp; &nbsp;</span>
                                <span class="pun">};</span>
                                <span class="pln">
                                    <br>
                                    <br>
                                </span>
                                <span class="pun">})();</span>
                                <span class="pln"></span>
                                <span class="com">// 立即执行此匿名函数</span>
                            </code>
                        </pre>
                        <p>匿名函数被认为是 <a href="#function">表达式</a>；因此为了可调用性，它们首先会被执行。</p>
                        <pre>
                            <code>
                                <span class="pun">(</span>
                                <span class="pln"></span>
                                <span class="com">// 小括号内的函数首先被执行</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="kwd">function</span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="pun">{}</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">)</span>
                                <span class="pln"></span>
                                <span class="com">// 并且返回函数对象</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">()</span>
                                <span class="pln"></span>
                                <span class="com">// 调用上面的执行结果，也就是函数对象</span>
                            </code>
                        </pre>
                        <p>有一些其他的调用函数表达式的方法，比如下面的两种方式语法不同，但是效果一模一样。</p>
                        <pre>
                            <code>
                                <span class="com">// 另外两种方式</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">+</span>
                                <span class="kwd">function</span>
                                <span class="pun">(){}();</span>
                                <span class="pln">
                                    <br>
                                </span>
                                <span class="pun">(</span>
                                <span class="kwd">function</span>
                                <span class="pun">(){}());</span>
                            </code>
                        </pre>
                    </div>
                    <div>
                        <h3>结论</h3>
                        <p>推荐使用
                            <em>匿名包装器</em>（
                            <strong><a href="http://cnblogs.com/sanshi/">译者注</a>：</strong>也就是自执行的匿名函数）来创建命名空间。这样不仅可以防止命名冲突， 而且有利于程序的模块化。
                        </p>
                        <p>另外，使用全局变量被认为是
                            <strong>不好的习惯</strong>。这样的代码倾向于产生错误和带来高的维护成本。</p>
                    </div>
                </article>
            </section>
            <section>1</section>
            <section>1</section>
            <section>1</section>
            <section>1</section>
            <section>1</section>
            <section>1</section>
            <section>1</section>
        </div>
        <div id="rightbar">
            <ul id="rightnav">
                <li><a href="#object">对象</a>
                    <ul>
                        <li><a href="#object.general">对象使用和属性</a>
                        </li>
                        <li><a href="#object.prototype">原型</a>
                        </li>
                        <li>
                            <a href="#object.hasownproperty">
                                <code>hasOwnProperty</code>函数</a>
                        </li>
                        <li>
                            <a href="#object.forinloop">
                                <code>for in</code>循环</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#function">函数</a>
                    <ul>
                        <li><a href="#function.general">函数声明与表达式</a>
                        </li>
                        <li>
                            <a href="#function.this">
                                <code>this</code>的工作原理</a>
                        </li>
                        <li><a href="#function.closures">闭包和引用</a>
                        </li>
                        <li>
                            <a href="#function.arguments">
                                <code>arguments</code>对象</a>
                        </li>
                        <li><a href="#function.constructors">构造函数</a>
                        </li>
                        <li><a href="#function.scopes">作用域与命名空间</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#">产品</a>
                    <ul>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#">产品</a>
                    <ul>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                    </ul>
                </li>
                <li><a href="#">产品</a>
                    <ul>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                        <li><a href="#">产品一</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</body>

</html>
